<script setup lang="ts">
import type { FormInst } from "naive-ui";
import {
  NButton,
  NForm,
  NFormItem,
  NImage,
  NInput,
  NSelect,
  NSpace,
  NUpload,
  UploadFileInfo,
} from "naive-ui";
import type { Ref } from "vue";
import { ref, toRaw, watch } from "vue";

import { userProfile } from "@/stores/user";
import { timezones } from "@/stores/viewProfile";

const formRef = ref<FormInst | null>(null);

const handleValidateButtonClick = (e: MouseEvent) => {
  e.preventDefault();
  formRef.value?.validate((errors) => {
    if (!errors) {
      userProfile.value = clonedUserProfile.value;
      console.log(clonedUserProfile.value);
    } else {
      console.log("error");
      console.log(errors);
    }
  });
};

const handleUpdateValue = (value: string[]) => {
  console.log(value);
};

let clonedUserProfile: Ref<typeof userProfile.value> = ref(
  structuredClone(toRaw(userProfile.value))
);

// const fileListRef = ref<UploadFileInfo[]>([
//   {
//     id: "1",
//     name: `hdata:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAABvCAYAAACOw8xlAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAADl1SURBVHhe7X0HdBXX1TXuSezELS64BPeOwR2D6QbTexUIIYoECIQASVQV1EACoYJ6L6ghQIgOAtGbAYMx1TR3O8Wx489O+ZMv+7/73Lnz5gkBwrHjfGtl1jrr3rnz3sybvc/Z59w7I2iE/27/9u2/oP8E2/8J0P/yl7/Y9vVXX+FPX39tHfm/uf3HgX7u7GlkxwVgS9FMZdOxtSgIm3L9xWryJ2FLwWSxXWUzsKt0FnaUzcLushCULQ7GprWV1ln+s7f/GNDXVuZh99K5WJfhj9LY4Uid0RUrF/tgdZqvjBlbkzkR67MmoXyBBzblTURhZE+ULhigxkdh25IAHKwKFSKqMoNw/OhB6+z/WdtPDvr/fPMN1mVPRVXCWKRO74k95aHYWxGmwPbD0oWjUBTlgaxZvZA2s5ccp6XP6o3c8IFYMm+4fIafpbfvLp+J9dm+qFo8DFuX+OG9ddGoWOiFDQWz8VclTf8p208K+vZN1diYFaAA7aGkYg5WJvoiO7Qv5vu1w0L/N7EyeRy2FQdjS/40bMyZhDUZ45SXj8fGXD+Rmh2lgdhXOUeAXRzUVb5DMvg9RkllwjBsyPHCoerZqE7xFfC//vor6+o/3faTgb5tXQWWLvBC5aLR0i6a8iZmeLyINekTFHD9sXByBwX0FGxfMhM1edNEWujR1YvHoyrJV/okbEt+kOj+6rTxyAntqYjxUUQFKtkZjJTgHqhY4K0jIMtLRVCgImsyliT4Wb/ip9l+MtArYkciP2Ig8kL7YfaIlwTURQGdbY8vnDsQKYHdEe/fAZE+byDU+2XE+LZCzPg3MG9Ca7EQr1fk2Hy/NsrTu4uXl88fgfWZk4U8ErC1aBriAzqqPDFCERiEDbljcHRdhJCxrjDK+jX/3u0nAZ0AhY9qgYzZvTB9aDOkzegj3pwXOgAL/NojblJHvLMyRiXFCOypmKUS5FRszp2AzXnjxGpyfVXrg9qiidheOhm7K6bh0MowHFkTgaw5fUSeeA3mgw0qGgqjBipvn46EqZ2ElPLYIYpcfyVLnlid7o8v//B765f9e7Z/O+gnjh1BYsCbyFbgzPBoLl5J8AkQgaZ+r0zyRum8AQrAzipxdsCiqW8gfnJLFEX2R1H0ADFWL8sSR2DpIg+l4V5YmzYaZbF9sSptKDbnj8HeyunIV58nuUzClKSqpLEq+Q4R2VmfMUHJ1xipeJbGj8SqpbnWL/zxt3876NFBHggb+TJCR76KZQtHIkKBsr8iBFWJ3sic1RXR415HiOcLSuu9ldZ7iuemT1deS8CVFSvA88JUJTPzLUXIm8gPVyWjImhFwnDU5KgqRun34VWROL4hVkpKRgQjJcTrJSwO7CKywpqfspYf1l+R7oNDVbNEztYURFq/8sfdfjTQ//rXv+KPf/gDynPj1WRnKhJCxqIkJx4zvNuKLkeNaYEYn9aoTh6DpKBOmDm8mSTH9Fk9sX/ZXBxfF4etBVOxavFYBTa1v49tJdGD5Xu1+VPwtqpezm1LwvkdiViR6KHq+3Yond8Ha9O9sH/pdBzfOA8nN8XLhIpeHj76VeTM6a+AD1DJ1U9FmYqOlNHYXzlNEvjavBnWHfx42w8K+scfXcDq3DCVFAOkhmZYJwV2U9LQCfPGt0WY92uY6fkiZg57AXPHvIaSyEGIm9AGW3KnKLC6Y1dJsIzFjm+tPL6VOofS5Gx/bM4JUAQESn+5kp6S2KHquDrX8KYIHPocwka9gkWT26Ngbh9V0UzE2a2J2F4yRUXJm0q3+6lqxg/H10fhxMaFAnTg0OclQTO5sprhb1yXPg57l04Vj9+QNdW6ox9n+0FA/90Xn6sp+ywJ3RyVDFnW5c0dJGCzuuBNUr/ZTh3UFAGDm0o1whvMntMLZTFDkDGzGzJn9hSAy+YPlRKSMhQ85DlM92iKGUObYvawZogc/RpiJ7VGTkhvJSkjJRoOVHIy5asiqCUC+j8hhKbPeEvpvK94evrM9iiO6YGdpX44XTMP71RHqGTdXvQ+P0yBnOkn0UeJI/DMNyuTx1t398Nv/zLoa4rmq1CdKqHJWjljRg/Ra3p6/OS3sE2RQdkojh4mnr/QvzPCx7TC+O4PI2lqR2TN7oGosa9iVeJo5eGtUDLfE9sKVWmXOQnLF45AZexwlM8biqXzPVC1aCTWpo7HnrLZKg8wovyl+gn3fgUpQW+hOsEbB5eHyYSJURAw6CmJpHXpPji3PV6Vmc0VUf1VVRSMU5vjNbEqSkg2oyh2YltF1FgBnsl9TeGPo/H/EujLUqeqSmMsdi2ZgdIYD0SMbYlVqRNQMk/pqdLlVcrj6TVzx7wukkLP4hSewM8a8QqmDHgSmTO6IXlqZ2xIGyeTm8SADojzewPRPi0l+c3ybC6eTpvt1Uyd6xUsnPSGSoodkR+qqhJFxJ7SEJkk8fzU7IyZXRRx01QyXYDSuCFyjuRpb2JrYYCSmwEoi+upvjMRJzdESw3PeQKTLH8viSDwe8qnyT2tLU+x7vaH27436BXZ86T6oGcVhA9A4rQu4t1HVsVhR9EMqQxmDHteJiyc2hMQajolh5Og0NEtMLnvk8ia2VXVzR7YWTxdee9s5cUzsbMoUCXJydiaq6b6hVOwv3yGuk6IAkklxZpYHF0bJaXiPL/XEDa6mZCQppLxsjgVJcXKAZRWU75I4Mqk0Ti2fj4Sp7QTElckjFATpgnICumg5gbeOLomFBlzeihiXkRqcDcFvC+SpnTCmtRRulqKGoKj7+yz7vqH2b4X6J9+/CHWpIxTE5K5Uk0wFJmM3lsdJ5pM76HH8wdz1sgamQQRBN74tEHPisdH+7YVr6TMzBvXUnncCwgc/Bwm9XsS43s9Dt8ej4r59X5CCKLHsqRMUQCzNn9n+Ux8vDsZH+1JRnZIF0T4vKgIbSsl5cYsvWwg1wruLNpPskJGvoDCiP5K12ciZXprVWaOkP76jImYpX4by1PeGxN7TfYo+W1FkYOtO/9htu8FOmtoekypKsGYtOjp71RFqx85WabntWqCkzK9m+itVCbBXSzP480HikYvDuyEoKGvYGjrxhjyxr0Y0OJueLV7CMGDWiByzJtImtzbzeIn9sD0wa9jSMt7MKDlXfB880FM6vu0kFAS1Q+HV8zC7w9nqyolAhGjm4v3F4b3U5IyXWahEWNbqP0+svIYOOQp+U1au9sJ8IdWBtsaz1VNOgzB3lkySfaXLZ5o3f2/vl016JV5sSIHtQWTRD8r4oar0J+LzVkacIKaEtQVMePaYFPGJElw1PodRcFYEe8pVQX1fVKfZioXzMfSODVRmTMCGYGDpS2LVlERN1El1iBsTJ+jtH421i6ejuVxk1EYNgoZwWpGOa0/kv17I3R4Wwxr+yCGdbhPVUXPKq9sj6154/HbA2k4uy0Oc8e+IKUkqyHKDonPmdUD76wKVxHWWXJIdYqHSubtsTnXSxIszxOp8gkrKybhqkQvVY2NFALOnz1tofCvbVcN+vJ4bzXx8FY/VOmfmlTQu7fkTRbPYcXB0o/6aPosGWtU7Vw4t5ckx0k9HkfRnGH4aEcpPtuzHBe2LcGFraX43cFqfHNsI/7neA2+OVlr2WbLavH1sRr88ehG/P7QKnyyewVObMjDtoIoFIWPFgJifDtj0Ot3wbf741I6rknxEvCPb4xU1dHLImOUHFZRJGJb0RQsi/dQM9reKvH3VJLUUTmMN95eGiRSRsApiTKLVcl30ZQOKJs3zELhX9uuCvR3D7+NkpiBsuC0wK+tqkx6qEQ3DZVxKqmNewOlaqYY0O8pkZclEQPVFP9V5e1+AjhlKGb4y1gaNgIfbl2CPxxcha/eWYuvD68ToL89sRl/PlWLv57ejr+9vwP/7+wusb9f2IN/fLAX/3thr7T/uLBfm+r/7fxu9b1aRWA5NmfMRppvJ6T4tMXgV2/F5AFPi/bvLg9QhOWpyZmSN5VMl6kydH26v/xeAh8/+Q1FRD9MGfSgioge2F40BtvyJ0m1xIilRNG4nEDJqcwKs9D4/ttVgZ4Z5iEJqyiKU2dvFf4TsC51rOgza2QSwbXxtSk+KiF1lbWTSlWyMezn9H8GtWnB+HRHGX5/oApfHlqDP727XrxbA77NDfC/n9vtAvzDfWL//Gi/ZQcc/f1y7M/vb8enuyuxS82I033bI2xgUwxr11gkpTppKL48nK6Su6do/fJFXqgtDFT9tqo0DELIiKZYnjAYM0c8rqqXAdhb7idLE4xMJl3OXnkOrlIWRw2y0Pj+21WBTi3fXxEgPzY7pJuSjQlqNjlIycnz4vUMS3p2SdQAmU2uSvJCXkh3mUlWx/kK4F/sXWF7+Z/e2yBe/t3JLfjr+1sF8L9a3k2rCzY+PlSvOcGn9//u7ZXYlBCANJ/WGNXhfknoBeHdcaZmLt5eFigVDnMR8w8rqt1lU9WE7UUURXdXs9e22JTtiV0lfuLtlKIV8V4yc16fNQoFc/uhNCXIQuT7bVcFOtc26C3x/m3UpKYLViePEm2nZoaqcoseXpUwHGmBb4nUlEb3Fy+P824pkvLp7gr8dn+VgP7HI+scXl7r8vBLeLcA/Ok7F9snyuoAz+//5cwOfFy7BCXB/TB7wHNSdiYHtsPJ9aGqaglQUtNGzXKHSO7hRIvr65SagIH3qaqsq+g7ZZHVDAGnt1cpb6fDsUz+V7YGg87FLP7Qknl9JZFSx5cvHK68prVMcDgRWrN4NMoV0OHeL8kxejk9/t3lifh4e6kNOqWFWk7QxcuVrDglhfrdIMCNice7JMcAz/NRwlbHTcA8NQMm8Dmzu+BcbQS2FIxVE6qOylHGiAwWhPdU99ZbTeQ6q+T/NFanDFKJ2kfmDYwGRvQSNVnamK20fW5/bF671ELm6rcGg15dniHlFdexqX/06NLogRKWLBWpdZXzB6mSrJvyinYoi+yH1GkdsWBMa5yvKbgI9K8sPf/upJaVS3k5wbwi6LQ63i7An98j52Wy3ZIahKhhr2DakOeUB/fA2S2hai7RVkigTNLbqxI81P00R+zEplgS3RXbCkdJictFtoKwvrJcwQckbPMjhljIXP3WYNDzF0zAnlLlMeNbqGyvZEbpNScbfr3vVyH5jHh4XkhPRPq2kMlKXmhXRI56GQeWxAjoH20rwSe7ym3QTRK9FOgGQO3FVwe6Ad54+1/OblO5Ywu2pk9H+KDmMk9YEtVTgOcTKXo5i4IY39exNnUEQkc9jxnD78e6jKHYmj9WtJ1rNywOSBhLUkrMP/7xDwudq9saDDovsm2Jr5r0vIL8MFWjK9DzQ3tgYt+HZfmV/eRpHRA08GmUKFLo5bMHN8Op1ZkCOjXdgO7UdMrLj+HpArg6HxMrz00JY3RtSpqCMe3vlxnq6sUeOFI9TR4JlkSoiizJG4uD2mPpwsGY0OtWJTu6hCTIXONnDmAuW5cxErmze+HA7hoLnavbGgw6EyYXiOSZZUArAT1HefO4Xg+JnBBkzuQ4CaGWRygvX7fIH6fWZtmgf7zTVb24NH2rrekE6JLeXh/Qxni8DuhS1yt5oaeTVJakTNqMshUxYzC604NSEOwpG6fura2a6neSaKXMFEf0xPiejWWmuiV/JMrn95eEWhDWW6qZdenDxPMLoj0sdK5uazDo/DFrMzzV5GKg0rS2qE70FO/27PBryeicbPj2aCJezoolZFAzHK6IF9DPbsp3gb5vmarTqx0l4xYBhMBIuVinPr8i8AI4k+gBF9iWrNCMlzOiWJ5S1jgTXhk9RhJrxvROeLtyEmL9XpA+cxELgcLI7ggf/awk1M253hLNXDhbMLG1qt27yPIzl5a/z9Zg0DOmv6XKxWFYmzYcqYFtUbVohHj6oFa3ymxz+vAXsGhqG5V4OslqYEFwfxxdmYqTazJxZmMePqgtUqBX4LO9lQL6H96xkul7rNO32sATJOP19FQn+LbUOMzp3UZSCDYJlPM4vJyRRdDp7UzsuUH9pIYvVgDvqxiPuImvyiyWuYkFwpSBd6u5SU8pH80jQRYPmTM7Iy+8G1KmdrDQubqtQaD//e9/V+H3FqqSB2JjppIVVcEQdGq7Z4e7ETysObzebCwk8Nnl1D6PY0fmHByrShbQ39+Q6wY6Jy+mbDTeboA3s1KCVr/cuM9GaTxupMQmjecQD98q1Yt4uboWr0l5Y27h7xrT+SFZbl6+qB/KYruoQuBVWS5YNLmjKhfvU3OTjlLFMF9x+bl4rqpiprSX1z0yZ3VHccI0C6WGbw0CnS9fsrRakaBBz57R2QZ9RMd7ML7PEwj2eAIxE15VifVRpE3ohANlcTi6IgnHV2fUC7qZlX71rvI+a2ZKbyRIRufr03p77cVafzHebcCW76nZrTkPzysebgHOazLSfrt/uSwbHCpfqPS9CUK9X1Tzj0EIGfmokMC3xkZ0vAspgS2Up3uJrnNVNVfNvCkxVcmDpX7P+x6lY4NA/+7bb9XFuqFyQT9syBihvV7V6Zxaj+x0H4a1vx2ho5/AuN73YXT7O6Um5s28uywZx1al4+x6DbqsLCrQ6WW8cXr7l4e56LXBrtvp9QSf3knQjPdzhklQ/35WL3TRDNDGq/lZfoff/fZYjZyLYPPcBJzX4jVJOnML5w3MNfuKouDZlus0zbEypZ9ynHsxecCzAnL4qKbYmKVllRNAPqFiDsuf21V0PWd2dwulhm8NAv2br7+WiqR8QR+sy1RaTq+PH6Yu3B2eb94Pn27XY0Lvn2NIm1uQP7U39hZEi6dzJkrQ6ekXNhfatTorGN648XgCwRJSPFEBRKBIgIsEdwKMfXd6mxvQTq/+05GNci6e98vDWse5LMxrknQmU0Yel5aZc3bmhMKj1d2YPuxJVSp2w5huOoLHdX9AkunGLE9ZQaX0sJJj7iIplJqr3RoMOj3dgF4wp7uAXhDeFUPb3Y3xvW7A8PbXI82/q9TBe4oiLwL9/Y0F2F+RqCIlFGtSZmNLTiT2lsXjvbW5OL+tXIGgvd+QYJZ9/3hEAahAZNSc21IsJBhjEhZTQFOmJGIoWcp4Dp6L5/x41zI1ESrB4ap07CqOw/q0EKxLnYOa7Ag1lirVFaus2oyZ8Gx9t/L0+7B4+kvwaH8X+r1+K1YkDZBFsEl9HrWrFpbIfEGKVd2pE+9aSDVsaxDo+3duENDL4nor0IejKKynBj2iGwa0uh19X7sNU/s3R/GMwdiaOcvl6Za8rEkKRvToLpg3thtifXoizrfXRbZgXB+xonBfNfNdiA+3VYhXEjSa9JWnGlCNsQoy4NLoxWdri1GbHYmMoOH2eeu7ZqxPd8SMUTLh2wN7S+LwXnWa/H7OWkd2uEUVCTdh4Bt3yEMMPtKb3PdxmbUWqlKZlQyfMqVO74yS9Kt7VaNBoB/YtVFJSmeUzu8loBdH9NagR3ZBz5d/gZ6v3IZE/16ojh0v3rInX3s6E2lh2BhEjuwkoC/yH4B4v35I8h8ofd74vLE9hIyYMRoAGsdIzoe1pfh0R4WSpKViTHyUBdtUfuCYOf7x9nKcWJvnOKc+H89txkhAwuSB0iZOGqBmmn3kt/E31mSE4EhlkqzJc3VyzuAm6NfyJuSFdhJdnz+xpX7kp6o3VjLjej4i4GfMHWkh1bCtQaAvL4yXGRsfaxF0TiCWLRhqgX4Ler50GzKDBslq3ubU6didF6FBV3V6XugoLImaIOHLZMrE9dG2MtF3gkqt54x1e+E85MwZJYREK5CKI8dL2J+vKZLPfKDkgd/ld9xMjfG85jzvr89HWvBwRHl3RcYML1Vh+eBQZbIcO19bIte1r6++y+8dWZmOxQFDUJ0UhCPLErC/ZL54fMHUnvDucKfMwLkOw7eImUw5iWIy9eul5SYjZKCFVMO2BoG+LD9WTQjelEV+ToG5mkjQ8yPeQu9Xb4VXh0dRHDJCPH1TSrACPdwG3cxIpXpRN8rkZTyTxkdt8pxU3TwTGvWf3zF2en22jPMcmgQFnsPMOL/Hzzq/xzFz7Q8V0Pra5fa1OUM2wPManFO8W5UkoDOxro1XM9VRLTHbS89My+f31Y8B1aSIHs4JE58u8eH71WwNAj1n/jjl6R3Fs9emeaBqoYc8hssL74JhqnoJ8WyL8rmjsXr+eGxcHIQdeWFSMlIjeeP0Vt6cAfzCdj6yq8aHO3X5yGqG4/RcAkkA6gPQCT7NkFQf4DbY20vsJWVjzA+7Shdp4NXMlJ/jdU+ty5AJ3dulsdieHYL1CZPlme7YrveoOUpfFQmD4dP9IST4txEt5xIvnxeQgKvZGgT6oqAeKvTflNp0TepQAX1p7AB5LXlU14cR5tUeFXO9xdPXJ01VXhJeB/QCHF6ZKd5GgJelhEplcnbbUinnmBCZOHmMxJAgA74BlK0AvU6vWpJIJ/BOYui5JJCg8pwf7FiqrrEeH+1Ryfignhssnu0jx06sL5CqiOc8vT7TBn1b1hwBfWW0D4a0uk0eWq9OGSIzb75zydVGTo5YwSQFtLOQatjWINAXTO0ioOeEdVJsD8RKlUQ5Q4sZ30yDPlJ5evhIrJo3DhsS3UE/sS4Lh6vT5cZyIiaJl83188CX727AmdpKfHFwrZSF20qT5BgTIyWHGk4gjFfTDBEXNhe76bjzuAGc5BFUvtpRW5wg1ziyrlCBvh7ndq7A5qJ48foY/2Fyrs1KQhklR1e6QKe8cGHMs+09EuUEnQtffMuBoMf7tZYnS5Sbq/mrvQaBnhTcVTJ4xqwOWB4/yAZ9VOc7MKa7yuATuqMi1AvVMb6Wp4cK6Buzw8X7MsP8sLsiGaULZwq4a3LmIz1yGqoy52F/lZKDLaVYkTZXQCBYfIDNd2EIIAHWbaE8EJEkqEhhpcI5weq4ifZxmiRcJlj1ORLIcybOGq+8fRmK42dje3kqJgzphkOr8rAyIxpbSxahPFHV7VlzJVq2F0a7gx45GjOGvKSkpJWK8sHyUJvezWTK8nFSn8dlaZt/1tPQrUGgJwR2RsHct7A4qLVoO+WFScWzwx2SwTMm90HFnOESiusTpmB7bih2F89XNXomsudOQF7MVMz0HYoWzz+B6xo1wm03X4+brmuEa1Wf9qtf3Ihnm9yLd6oysXxxqEQFAdSVi/ZqAnliVaoASQ+mkVA+JOExgq2/Q28vxpFVWdhXkYKawoVofPsv8bPrr5Fr8fq33NgItyr7+Q3X4pmH7kVmxBSkzBmv5iGBkvx3KuAJ+poFE7EiajQyAnohzPt5eT2jKKq3JFMuB/Cv/fjePddiDr2920LryluDQOcfxpbEdEPi1JZ6CWDBYJTH9saIjnfCv9djyA7ojfLZHuoHjhXQt2WHoThqIhKDvbAo0AuLo+fgT1/9Ed999x38fUaiT+sH8c///Rs+/vADAaJdy1dwvUXAdN8hEubH1mQJqARRLx9ofTaTJE6I2DfTeYJOiaG3nlyTjfdWp+PuW66Xcw7q1xO/vPkX0qcNaNMEfV5rjMqyJfjzt9/g7KnjWDB7ImIne2DepCGoWhRkg7480hvF0wdgVJd7sSy+t0T62K4PyXIANZ3vtLNsXH0VfyjWIND5d/q84IJJr6AksjeWxQ6RxDLqrQfg3+NRZPp1dgPdyAsBI1ifHt+Hr776Ct988w3aNL0Xwzo/hD//+VsUFRWhkQLBWNcWjwj4hbEzkBXqa69QEnQCTqA53WeVwT7XxlkFEXiCLmSpGXBO+AS0eu4x3P2rGzDOs4f8/dNNN91kX+fmGxrBv9/z6Pfma+IIX3/9Nf5ydp9ch+cwdfqa2AlYoSY+ZTMGYXibX6N0XnfJabxv1ul8yYrAR/u0QH7SHAutK28N0/SgjjI5SA58A0vnDUTZvH6yzuzT82H4q0SaPeFNBfoQLI8YjXXxAQI663QCxkqEwPzp95/ho48+QPumt6N9s9vdwDbWsXljjO7aHDdeo4CPCsCR5Xo9nmDQq5mYuQLJmahett0iayzUbUrL8ZUpeGd5AiYN7YqWr76Evi1/jXtvvfai69DbZw57A8M6vSTO8PmJt+X8lDFeb19RjIDOyd7ycC+UT1f5q8P9diHBWSnrc66/EPzw0S8jabanhdaVt4Z5enAXbMkfgcoFA1Ae3VeB3gch3g/DV0nLxC4PIcevE8pmDdWgL/KXGnffknlyAwSDN/TlkU34/eefoPWzt6N/6wfkxuuCMfyt5zF1wOv4w+++wEP33IId+TGqhEuVyRM9myuJfLhh1tC50nho2UIhldLCtZ5li4LhObgf9uzaif6v341nf3PzRde5XpEa7dMJPv3a4cNjh6Sy4VIvz3F8ZRp2FczVoKt5R+VcL5QED0DEsJeQNK0VqpP1c1S+S8+qhcmU/ajxDS8bGwQ6Q4gL+XxMVRbVR/Tcp/sd8uI+31HUoA/GsoiRSgf9RQ/3qGREz+SN8Ia4xPrtye3w6dVCfe9R3PMrdyBuub4Rkqf0wpheLZX+fy3Ab8oKF9BZrbCu5zIuAceH+3X//B7xeC56kVxO4dNCJuCrL/+AL774Au2a3g2fHo9fRHCv1s8gTV2rODZQiOQ84bOd5RKZXBnlMsbW9JkCOj29dPpApIxpJTNTymxJdC9Z7OKyLv80k0sDsRMbPkFqEOgsiWpyh8tKIzWdoA9q9Ut5sJvi2xq5E7uI7tErGJL0Ei4FcMGLiY2JToNWK4/U8Ml+ZMwejk7NGuPhu36ODs0fxOqEAKyOHYszBzbju8/P4k8fncSOkiRNmtJz8zCCj+f4bJTazkd49HJKDKf3jKw91YX45pNT+PMX51CYFIUxnR6DX99maNbkV3j03p9j4oA22F0Si39+6HoRSWbHSgb5/Xcq4mXBiwt34ulqRkrQM3xaYUKvB0TX+TDHt8fDSJzcVuSFywFMqA3dGgR6yrR2qEpSOh7eU54W5Ya1knV0/iUEX9LkilzpTAW6+oFmpZE//ODSeLkRo+tc9+ZTHnqrgMf3EC/xhJ+fISBmbZ0PKPhdAq0/d9B+PPc/720U+eFMk/vyGT64rnteud5B/VxVRQk/SzL56I6RckJN4lijMyfVps2QeQdLYcpLzoQOGNzyVuSFd5a/0PPv/5SUipJIx7WS108aujUI9LTgtlgS1V3WkflcNHbSsyqD/0ZdWIWp8oByJS30hqUhngL6FvWDWavzBigxvCHxVuWplAOCZQNfHzjK+ACa+m2e4rMlSPIAWuk5gf1cJVA+DyUhrGD4mb+dU/LDtwbqntN60ZTf42saxstJKCssRhQjc69KogR9S8p0DXqIh4CeP7EzRrdrjPiAFrIOM29CK0mm2tvby8tLDd2uCPq7B/fIyzhcT6e88GnRiI63iJ6zRmfYVajKhT9MJkjzx8nyLn84Sy9Oq3lDnNTQawkQ3yXnM04CUC/wCiCOa2A2izQZULlARd3leyzmXRaSInZ0gyozsy4GXZ1PIsB6J4Zkcp9PnRghnAFTz5kT+ACGhUBNcpBMjCpmeWBJUH8UBnTDfK9X5XEeX8vgmw98gE1P59o6//i3odsVQV9WnIryuO7yhisTaebslujb4haRlhl9nxHQS2f0R1FgXwGd3sHlXf5weg1vhDdEbzISwyTo7u11Xp1T+5SSv53hO4g14o2i3e/oJ0ckgcb+pzu5XFxmRdEWnF6XJ+d1P98hkTkSZ94cYMRRWlhZsSRl7jlcuUgewPC3cw2JEyMWCAS9eGovkVJOCIsju2JpXB95h5Oa/oODvrwkHRsyPeTtJv6rEwv8n8KQNvfI0/Lksa0E9GUhw1A4rZddNtJLTAXDutm8Ks0b5I1eLDEHRH4oKQRIXrdQMkJyCCY1l3nh890VUglx/3f7lusn+spLTc4gQfRgft+OIMtINq/pAn2LVFSs8fl9ToqYRPeocpG/nSuMrFxYIBQF9xeZ4b0Oa30nMme1U1VMX3mjjbNRvudI4Bu6XRH0haHjsSqZ7+51kKXc8T1ux8i3HhTQyTx/CBeFiqb01MlUVTCclcpjO3UDvJHqeaPlxgg6KxCCbuptgsOKhustBJ/7HDfAfHV4tUxaOPHRfzqjX8mjGTLMMZ6bRPF8fN3DBbw+L+WMoDOKjGyRuA9qC9RMNlVm0ay6+Ns5G2WOYpHAZYD1CychY2xrDGv1a6XnL0rpyL/gJtj8s58f1NOnj+I/YqYSxpR2anLwoixymT+sJeD8IRsXTVbh10d0nRUMa3X+cN4Ab4ThSnB4g7xRgnl2c4GAY3TdGEFxAvPbvcuEOE7v+bdKkhMUsBIFKmp4TkYSlwyYMzjOfEHi6p77fy/oPHFmY4EtW8w15zbmiAzyt7LqYk7iMjVn2ZQV6jrvgaVxlOfLqkZ/BGXz9WsYfIhBieGrhQ3drgh62Lg2WBwyQh5OHz24Gfv31OKd/dvFTr6t7ezRt3H64G6cOrAL7x/ag/cP75Wxc+8dwIXjh/DBqaP4+PS7+PTMe/j03DF8dv44Pr9wEp9/eErZ+7Z9cuE4Lpw8Iv3Pzp/EZx+cxidnj+PMsQP48PR7MsZjX3x0Rtk5fPGB/hzPzet8eu6EOu9pNX7W9RnLzDX4nQ9PqGuoz/G7/M7Hp97DRyePyvj5Ywfld595dz/OqPvgfbHlsbNH9uPEwV04tK8Wp97dqWw3Dqv7r1Vzg5BRr1uIXXm7IuilGfNx5OgxHD12Cu++d1KMfWPvHT9tt8dPvH+RvXfy4v6xU2fETpzULcdOnj4nx2Vf9XmMY+wb4/6p98+Lmb6zdbMz5+U79ufVPq1u3+ybz5pjtlnnEnv/A5w+86HbPo2/9chBJWUN3K4I+saNNdi6bc9lbJdt27bvtm37DnVs535s2/U2duzUZvZ37t5vj+3YtQ87dx2Qlvs8ZmzXHr3P1ml79h64rO3dd/Cidt/+Q26t6RszY87PO8fNmLOl8fPc5z1z6aEh2xVBLy9bitVrarBx0zZs2LjVardgY81m1a/FppqtynZYrenvQM3mnajZst22zbXWmGWbt+yy2y1bdyrbbdlOIdO1v9sid4+6sb1u/bpGorfvUMSqPglk3xDrZmbM2TrMOMW2y31etbye7Ctbu74Ge/eqUrUB22VBr920BkUFhahetU4A17bFAr/WRYBqjRnQ2TcAkwwB39p3jbuIsElQ5GgiNAFO4Dc7+lu2mwgzJDDC6oLPiNvv2NfHCJohxAbOAOowAV2NCwlW324dxnOsWr0RJ06ctJC7/HZZ0GNURVKYn4uq6rVYt2GzslqsXbfF6m+2CHCZIcJljARNggHY2b+UGQJqandJf/M2C3wFtJMEDb5ua3e4osBphggNuAGeROi+c9+YO6Du+yKF9ezTMXft2G4hd/ntsqCHj3kd+bmZWLFyDdas3Yw16zZJGNFIQF1jBGgydCSYKND7mgS2GninLLkIqRsRxusFfBUFBvS65ooOKxKsPkHV4LsigQSZPo3AcswFvI4MAVx5tt53SQnNzkPWcWK0a/sWC7nLb5cEnf84/OyRLyEvKx2Vy1YK4G5GEixzEaH7JioMCSYqNAEmIupGhTq22ZUTDBFu5iTEigK2lCE7KiwCKD115UhLkisC2LoIcMqTJScWoLrVZPBz3Lf1nn31nRVV6xAX5m+hd/ntkqCXZETJqwZ5WalYWlktmkVbvXajAC2tgwSC7STASY4BnsZjRo60mTyhSTGAO/tOcyPBYSYShAhr33i7JsHyfgt8W6osIgwJGnTdGiPgrnGdJ8w+pYUEL1uxCn6DGzYrvSTos71ew6wRz6A4Nw2lZSuUZm1QoK8XI+CmNeCbfTcSHH2aAd6MGRLMuJMM7lN6tEzp1kgRCSGwhoQrkuEgwJDg3HeakHMZQuoaCeBnqQb+Hg1bf7kk6PxHK0NHPYTCnESUlC6XZMpkQXP2aToKNCFOMoQES4LqJcQRGa7coAmwJccmQucFV35wzw1OoPW4Y8whS87SVcuPe1Q4jUDr+YcrSTsBN/v8/tLKKgQOb2Whd/mtXtBn+nSWP80OH/1LZCZHo3hJuSQKY1XV68XcSdggbV3gdYS4SHCCX58Z0J0kmNxA8Onxpu9OhCtx6wjRpFxUqjoJYBRYJIg0GeO4EOE+ZxCSRJo0GaZy4vfLKpZjxoiGLQXUC/r0ES9jxvCnEDzkOiyOm4WColIsW75GdGt51WpJGjQDuCZCe78hpi4hLhJ0ZLBPcuoD3i0SVIlqokH6UrJqgA1BTtDX15hkrUE3ssR9gsMxAspxA359pkG3wLZIMGM8bo6RBJ6rrLQS0z0b9vSoXtCDPJopafkNgofejshZfsgvLBHNIuAX2Yq1YvR8EqEjYIPd1+aSIx0JLjkyhNQF3ozVd4xmCNDSdHFOoHFMR8IWAZtkcV8Toid7bjJEU5Fgj1lRQbDr7tugK9OgV2D68FcsBC+/XQR6dNAIeTM1fPTNqnp5BJPHDERewRLRLHp75bJV4vFOzxfgHQSwL9FAr7daiQibFBMBmghNhpEiS57W1AjglwSfucLREmAXCWoSZ5OhZUqToFsTGZoQ3de5wb1k5b6A7bS6cqWM1yHo0zxeslC8/HYR6MEjXlVJ9EmEjPwZJvZrguE9WyErrxBl5VXi7SwfCTb7NCHAMoItYyREmRDhIMOAb0yDryPBZZoUEwXsE3BNBtv6Pd9pTilyJmsDvCbDGR2uspV9AmmiwRBgR4Bq9TFXhPAa5aVLMHVQMwvFy28XgT5t8PMIHf0AgobeAu+3GmNw5+bIyilAafkylC9dIQmDLT2fponQfQJsCKiPEDsSrGig0fvZEmyTD5yRoYnRBJkocJohxQm6M0IMCXZkWEbASYppdWQ4k7RrEkfw3UlwkKFA57VKi/LlaVpDNjfQd2/fhGlDnsHcMbcgbPQjGNL2Tozo/iLSM/KxpKRCgCfoxuojwZgmwxUVbuDXYwI2pciSI9OaSHD2aQZwJwEE00SFkSczZreW53PfRIAmwSVJhgADvjsRJkFvk6RNAvg7OJ/x6/2YheTlNzfQF8z2tqTlRszyegL9WtyO0b1eQmpajiobl6KkrFKApzn7tPKlKx2mSTD7zAOaCFerTUuR2XeLBIcRcLYEWwhShNDDzl/4zCLBJUXcZ+vMD4YEJwHS55gVAU4iCLILfJ0XNPg6P5h8wGNsef3CrHj5dxEasrmBPmVIc6laAgdfh4BBj6HXy7fBu0czJKdkSNm4pKRSwKbXszX9+khwRoQzGkgCI4B9TYCWp7pyZEcGgXdEw/JqnSvOnvsYh945ZpPhNA26JoCAs29aA7oQofrGzBhb2yxCCC77QoRIkiFBj/H35CZHIWjYszhy6Mr/ArUb6AEDn0PE2NsR5dtEXi/gX0J7dn0aScmZUsFwkmSDrmapBngx7tcZc4IvUqSSMVvpW2NO00RUCwHGeEOGAHoUvZN9tubGDTEiSzRbmnSUaAI06CYCdN+ZpDUJ9YFuzHg6+yYP0PibUxcEyz+61pDNBv1vf/sbpg16GhE+NyPK53H51y0GvnEXPDs/ieSkNOTmLUFhcZnIjG7LxUiAaQm0iQY3EqxWoqBMA25aQ4Duu6TJRIAhgY/F3j5wFIePnLCfqZ4+cwHvn/1IvN6Qw1ZIUGZI0BHgStQmGmR8tZYlJxGGBG1WjjBRwVxhSZWRJP7O5Eg/RI57wULz8psNOv+PT/6bLSwVw8Y8DY/298j7isPffFSBnoKc3EKRGNsKyxX4FW4E0DTwFW4kOPfrRoMQUEeSXN6vSSCY5lnk2wePWMCfxclTF3Dq9AcCpIkGYzb4DhJMNDhJMWTYJFim9w3oLuDtklVFgYkM/saFc7wQ4XuVnr5723rM8XpEZeBG8m/ODmp9N0Z1fRDD2j+AxMRkKRspMTTOUPMLyqRP0E0EkAyzX5cMHmdrR4JlxWwVEQZ4p1GOSAKrBa5b1wf8iZPnHHJkErVLnpwTOiHAIkHAJwlWxSRjqiXgPGbMkOEuS+7zB/7+2BmDMdPrKQvNy2826AVpMXZ9Pm3Iw+j/+h0Cuke7xkhISEBGVh7y8kvFDOBsSUDBEt0aMgi4TUAJI8JFDM14vokCAd8ihGBzX4BXEsQ+9ZOreXxWaYA/cOhdHHn3lABvIsPIkatvkrUmw44EIUIT4hwzRBgymLQNEdoc5etqV7Lm746e2hP+g5+x0Lz85gI9NUpN/e+GXy9VuQx4CANa3YkxXZpoT49PlFqdQFPbCby09HzVz84v0oSofYItRDhkyO4rM5LE1ni/eyRoMtgXKbKiQJZRrSc1GvjDtsbTjEwZSeI+gdaEuCZwBFgT4YoO07cjgWZJED8vJNDzGRUE3ALekMR7CZvYRjluw/4DQhv0vMWRiBhzp6parsPk/k0EdO8uD2B4x/uxaGG8qtWzFNBFbjLDfQM8LccaJ+h2q8btfRUFbkRIXnBJkSbCJUkmIujtXFiit/NpjfH4/QcU8JbUMCokOpSZ3GCAdxHiyhNsCbQpXw0BhhjumyhwEmGANkTwOO8tZEIL+QfmGrLZoO/aulZVLXfCp3sjTOrbRCoXgu7ZsQniF8RJ2UjAaUyqObnFAroxjum+KwIMKSY6DPBGlrhP8Nkn8OwbwHVEuLye+k7g6fFO4Ck1XNu+KEGrz7sRwPxgjRF0tkaKaPwMW4JuSOBxpwTZ4FsEsOU473PW2IZVLtxs0PnfDkeMuQvjemjQmUiHd7wHIzs3QUJcHBJT0pGZnS9G4HWf4BdaRBTXQ4grCoQIiwzTEnxpFegmCuy+FQ2GDBLA8OaCk5aEVeL5rNPrRgWJMuDb/XqStU2IZTYBlRp8Fwkkx12ODBE8zvueM7m3heSVNxt0hsYcb/6HHtdiysAmGNr2Xgxtczu833oI8bHRSEzKQEZmgW0E3JjezxfANSna8w0pBJ8/TBNh6b8yjpsxGTekGEKsSDBmcoFLlrQcudoyAZ59JxEuMnRrEvRFJFjVkgHfZa75gzGOEXR+nkXGBx+ct5C88maDzi14+P0IHXWDql4eFC0f1Opm+VcuosNmYVFCqoDLhJqemav7bNUFNfh6XEeBJsIVBbo1UcJIcB7TxLiDLn3LCLhzn2Yiw50UF+CaFE2CE3TTF1PebxOhQDfRYO9brSGCLfcNGYwAfoYYXM3mBvosnw6IGX8jJvW/C16dHpBkyj8ACJsxWYG+GGnp2QKsAT49O88NfOPxmggtRcY4ZoDWppOyGSPohgAtTzoXiEQpkIUUQ4YVCWIOOWJfCKA0KTPgm1JV72tiKDsE3JSwBJx9IeMSRtDFrIggAfwu7/9qNjfQz75/EvPH3yr/xuLobr8RiRnb+l4k+I5C3MJEBXqubXXBF+AV6IYEOWZIyVLjDiI4RqCNPGngi5CZ6yLBmCHCJUUWAQp8Uy0Z4z6BZz+/WOeHAgUygRcy1HxC+la+IMjO6DDEGCJMFJgkTaIItDECz/PRGf/5z39aKF55cwOd2xzvJspuxbheD2Bas1+joPG1SOnXU0BfnJotF1icmukCXpkhItXaJ+D8nHyG4FtG4IUcttw3kWGRxb4LcE2C2deRoGVJk+CsmFS/wCVBQgajwRBgIsCYBbqzrwkwpatuTeVkE2CBb4zHGWUpizOwKS3VQvDK20WgL5g7HvH+92DmG7dj8fXXIue2Roh9owXmLUgQ0Fmva5BNn22OTYjZN8cEcJucbBt4Y9w3Y84oMKbJcPd+GgEnsJoEVk6GBB0JctwiwU2WLAKEDAWYIYUeb2TJkMC+9nzt/S5pckkUv5+uKruyh27CoQ0bLBQvv10EOrfEwNeReH0jLGykAFfmc8edmB+bIOvq9HICSmM/OSVLxjXwjAB38CUC1Ged4NMMIRINHONxY2pfiFDyRIC1LLkqI73vigoCbFoCrgkoFkDsSCAJCnSSYo65mUUMCTD5wsiRNkumLGIMGTx3SlIq8u+5DgW33YhjDXhHvV7QZ991FwrvaoTlD12Lit/ciIjHGiN6XrxMkDTw2TbYBFpHgPZu4+Ec0wRxXINvIkSDreUnJcO1Xxd0GbP6tlGKTGuZiQSOG5K097sIMeAbAgz4NI45o8EJvtk3ESBkqNaQwXOlLkpE8g2NkKQcNPnG6ywUL73VC3rsjY0E9OrHbsSm5+9GyRtNBXTW6gQyaXG6gG5I0GBrT+cx0zfj2jQhtLpSZKLBkKL72UKI6ZMMAiwkGMAVyGbfgG7GTUSw1aY/o0HXQOuW4Os8ocnQSVrLlCsKSIL0DSHcLyqRa6XFLUSMAnzJXdeh6O5rkDvy8v8i6UWgV8ydi+zbrkOiAr7q8Rux/vm7UNHyWcREL0RCYpoNNAlgXxOQYRv3aQSd+8bbTd+0GvRc67ghxEiUiQpXZOhosCJDAc2+HRUWCeybfQLuIoCAa+A5ZghwmokA9g24hhwhQgHPfbaGGBqvlxc+FysevhHLH26E4nsbYf619fqyvV10NOqmmyR58ssrHr0BK5+8BUXNHkRURJxMkBKT02xw2TcgO/u2CUEqIlI1IQTUAE8TkNNz5Lg+pokwxwi4JsFEBiMiBwZsA7wQYwEux1iiOolwjAkZFhHs103SzopJSMijaRnSROjcIKCrlr+hbEYwNjS9CysfvQ6ljRsh9efX4rOPPrIQvXi7CPTUW69D3q+vQdkDjbDyiZuw6ulbsbTpfYiKnC+eTnDp5bSExBQxG3AFMseFFAO4Gue6jYxZZBjQzb6TDBNJxvu5T6C16THeKM2Q5E6AbgmsTYQy2bfGDRkadNeYDbyVtF3zBpc88RjHjPEel/uPw7pnb8fyR65HSeNrkP2raxH4s59biF68uYFeGhqK3DuvFS9f9ogC/clfYPUzd6DqubuVvNDTF2vQjRF81TrJEJBVf1GyJkaTkGX3BWgFpAHfBtsC34CuidCabj7jSs5aijT4Lt13jevIkKgQQhySZBFAUG0yVEvToLpIMGaigcdcJGjj767y9cTqp34umJU/eA1y7rgG0ddcWmLcjsQ1vs/y8mtFz9c8eyfWN70Ha59vjJioeVi4KNkGzwAvIFq2yBozx00O4DH5rOqb7wgBzmM8B/eVCfhqn0C7zFktaSOohhjddxFliCDQLlI0ISI3QkIdWTKm9gV4ixANvI4KGsEm+BynI1aNGYrqp36JFY9dh4omughJuIyuux1J+oX6wj3XyBfp5WuevcsC/R6Ez5wtFczCRSna4xVoRl6c+wK6Bbg2lwSxdQLt/I4hRIgiAcaszzu/Z+9bRjJ4LkOMGaMRcO6TDH7PECIEphtiTGS4IsY5bsZICPuGJJ5j3vxFqBzSE+uUGqx+5jYBvvT+a5B167VY3L3+/y/DBv3P334rVYuRFmo5wV7X7F5seP5exKoyKHhGKELDoxARGYfIqAWIitFtZHSsbpVFRM239/k57oux7zB+hm1UzEL7MzyfOafuL7T35byOa5jjdATd8jt6/0pGoGic8NFc+/qYGY+NS7LbWDUjF2PfsrkRMQgMnoXKFk9h0wv3S6VX/eTPbIkJu/F6C133zQa9dMoU0XNKy7LHbhAtp5dvaH6fgF7V/EFM8fSE7/hJmOA3WdtE3febGAC/Sf66dZh9jGYdd46Z81zqM+Mm6muwP3HSFNfnLOOYMed+fZ9z9o1NmjzNbo35BwTa5jzmHJcx/yCMHzcJBd3bo+alJtiijDitfupmUQrK9LxL6Pqlhee/24+2/Rf0n2D7L+g/wfZf0H+C7b+g/9s34P8D0Qp9bZzcAbAAAAAASUVORK5CYII=`,
//     status: "finished",
//     type: ".png",
//   },
// ]);

const file2Base64 = (file: File): Promise<string> => {
  return new Promise<string>((resolve, reject) => {
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = () => resolve(reader.result?.toString() || "");
    reader.onerror = (error) => reject(error);
  });
};

async function onChange({ file, fileList }: { file: UploadFileInfo; fileList: UploadFileInfo[] }) {
  if (!file.file) return;
  clonedUserProfile.value.image = await file2Base64(file.file);
}

//watcher function to
watch(userProfile, (userProfile) => {
  clonedUserProfile.value = structuredClone(toRaw(userProfile));
});
</script>

<template>
  <n-space justify="space-between">
    <h1>Your profile</h1>
  </n-space>
  <main class="f-col prose flex h-full w-full space-y-8">
    <div class="main-profile">
      <n-form ref="formRef" size="large" label-placement="top" class="pr-4">
        <n-form-item :span="12" label="Fullname" path="fullname">
          <n-input v-model:value="clonedUserProfile.fullname" type="text" />
        </n-form-item>
        <n-form-item :span="12" label="Username" path="username">
          <n-input v-model:value="clonedUserProfile.username" type="text" />
        </n-form-item>
        <n-form-item :span="12" label="Change Password" path="password">
          <n-input v-model:value="clonedUserProfile.password" type="password" />
        </n-form-item>
        <n-form-item :span="12" label="Email" path="email">
          <n-input v-model:value="clonedUserProfile.email" placeholder="email" typeof="email" />
        </n-form-item>
        <n-form-item :span="12" label="Institution" path="institution">
          <n-input
            v-model:value="clonedUserProfile.institution"
            placeholder="Institution"
            type="text"
          />
        </n-form-item>
        <n-form-item :span="12" label="Location" path="Location">
          <n-input v-model:value="clonedUserProfile.location" placeholder="Location" type="text" />
        </n-form-item>
        <n-form-item :span="12" label="Timezone" path="timezone">
          <n-select
            filterable
            clearable
            :options="timezones"
            @update:value="handleUpdateValue"
            v-model:value="clonedUserProfile.timezone"
          />
        </n-form-item>

        <div class="flex justify-start">
          <n-button type="primary" size="large" @click="handleValidateButtonClick">
            Update profile
          </n-button>
        </div>
      </n-form>
    </div>
    <div class="upload-image">
      <n-image width="100" :src="clonedUserProfile.image" />
      <n-upload accept=".jpeg,.png" directory-dnd @change="onChange">
        <n-button>Click to Update Picture</n-button>
      </n-upload>
    </div>
  </main>
</template>
<style>
.main-profile {
  display: flex;
  min-width: 45rem;
  margin-right: 3rem;
  margin-top: 2rem;
}
.upload-image {
  min-width: 20rem;
}

.pr-4 {
  min-width: 30rem;
}

n-upload .n-upload-file-info {
  display: none;
}
</style>
